# Andre innlevering

## Beskrivelse av prosjektet

Den andre innleveringen bygger videre på appen fra første innlevering. I denne innleveringen lagres filmene i en JSON-fil, ikke en tekstfil slik det var ved første innlevering. I likhet med første innlevering har vi valgt å bruke implisitt lagring, i stedet for en dokumentmetafor. Altså vil filmer som legges til/fjernes i appen automatisk legges til/fjernes fra json-filen. Vi valgte dette fordi vi synes det passer for anvendelsene til appen, og vi syntes ikke det ga mening å drive å importere og eksportere databasen hver gang man åpner/lukker appen. I tillegg til dette er hele prosjektet modularisert og testene utvidet betydelig. Testene dekker nå en stor andel av prosjektet og en god andel av hvert av lagene.

## Arbeidsflyt og arbeidsvaner

For denne innleveringen har vi brukt issues og milestones på Gitlab akrivt. Vi opprettet en milestone for innleveringen tidlig, og fikk satt opp konkrete issues vi skulle jobbe med, vi har i tillegg gjort vårt beste for å opprette en separat branch for hver issue. Dette gjør det enklere å merge, og det gjør at flere kan jobbe i samme fil uten at det oppstår kollisjoner. Likevel oppsto det en del problemer, spesielt når det kom til merging av json-branchen og modulariseringen. Dette skyldes nok at modulariseringen hadde en så annerledes struktur enn de andre branchene, og json-branchen hadde en helt annen form for fillagring, som kræsjet med modulariseringen. Derfor oppdaget vi, når vi merget de to branchene, at fillagringen oppførte seg på en måte vi ikke hadde sett før. Når vi kjørte appen vha. [App.java](moviedb\fxui\src\main\java\moviedb\ui\App.java)-klassen, så funket alt fint, men med engang vi kjørte vha. "mvn javafx:run" i terminalen funket ikke fillagringen. Vi tror dette skyldes at forskjellige moduler har en annen path når man bruker "Klasse".getResources("filnavn"). Derfor valgte vi å "tvinge" pathen til den riktige, som gjøres i konstruktøren til [MovieDatabase.java](moviedb\core\src\main\java\moviedb\core\MovieDatabase.java). Dette er også grunnen til at vi måtte få denne øvingen utsatt, da dette skapte mange uforutsette problemer på dagen vi egentlig skulle levere inn. Vi har også brukt "board"-funksjonen på Gitlab aktivt som et slags Scrum-board, der vi legger inn issues som må jobbes med, og gir de en prioritet og diverse andre labels, også kan vi flytte de fra "open" til "todo" til "doing" og til slutt til "closed" når de er ferdigstilte. Dette har ført til en god arbeidsflyt i gruppa.

For denne innleveringen har vi kanskje ikke vært så flinke til å "assigne" personer til issues som for forrige innlevering, men dette skyldes at vi for det meste har jobbet enten sammen i gruppa, eller drevet med parprogrammering. Likevel har folk hatt god oversikt over hvilke oppgaver som gjenstår, og hva som eventuelt skulle måtte gjøres før neste møte. Likevel skal vi til neste gang prøve å være mer konsekvente på dette.

## Kodekvalitet

Kodekvalitet er en viktig del av denne innleveringen, og derfor har vi valgt å bruke både JaCoco, Checkstyle og Spotbugs aktivt under utviklingen. JaCoCo har vært et nyttig værktøy for å forsikre at vi oppnår så høy testdekningsgrad som mulig, og Checkstyle har gjort at formateringen i koden er mer konsekvent og lesbar. Spotbugs har vært til god hjelp for å fikse eventuelle bugs som man ikke ser selv. Vi har likevel valgt å utelate noen sjekker for enkelte bugs. Disse ligger i [exclude.xml](moviedb\config\spotbugs\exclude.xml). Først og fremst fordi vi ikke anser de som nødvendige å fikse, men også fordi noen av de brukes aktivt i programmet. Bl.a. utnyttes det at MovieDatabase.getMovies() returnerer this.movies, og ikke en ny arraylist av feltet, dette lar oss enkelt sortere uten å måtte hente ut en liste av filmene, for så å sette de tilbake igjen i sortert rekkefølge. Likevel er det dårlig praksis, og vi har derfor passet på at dette ikke kan brukes på noen som helst måte for å skape problemer i appen. Sjekker for både JaCoCo, Checkstyle og Spotbugs kjøres når man kjører kommandoen "mvn verify" fra rot-mappa til prosjektet ([moviedb](moviedb)).
